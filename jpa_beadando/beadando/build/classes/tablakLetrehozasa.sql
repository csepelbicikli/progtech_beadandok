
ALTER TABLE KOLCSONZES DROP CONSTRAINT FK_KLCS_KONYV;
ALTER TABLE KOLCSONZES DROP CONSTRAINT FK_KLCS_TAG;
DROP TABLE KOLCSONZES;
DROP TABLE KONYV;
DROP TABLE TAG;

CREATE TABLE KONYV (
    KONYV_ID INT PRIMARY KEY,
    SZERZO VARCHAR(100),
    CIM VARCHAR(100),
	ISBN VARCHAR(25),
    KIADAS INT,
    OSSZES_PELDANY INT
);
 
CREATE TABLE TAG (
    KONYVTARJEGY INT PRIMARY KEY,
    NEV VARCHAR(100),
    CIM VARCHAR(100)
);
 

CREATE TABLE KOLCSONZES (
    KOLCSONZES_ID INT PRIMARY KEY,
    ELVITEL DATE,
    VISSZAHOZATAL DATE,
    KONYV_ID INT CONSTRAINT FK_KLCS_KONYV REFERENCES KONYV ON DELETE CASCADE ON UPDATE RESTRICT,
    KONYVTARJEGY INT CONSTRAINT FK_KLCS_TAG REFERENCES TAG ON DELETE CASCADE ON UPDATE RESTRICT
);

INSERT INTO KONYV (KONYV_ID,SZERZO, CIM, ISBN, KIADAS, OSSZES_PELDANY)
VALUES
(1,'Molnár Ferenc','A Pál utcai fiúk','345-234-345-X',1990,12),
(2,'Móra Ferenc','Kincskereső Kisködmön','123-455-663-5',1983,3),
(3,'Gárdonyi Géza','Egri csillagok','142-777-886-4',1980,4),
(4,'Daniel Defoe','Robinson Crusoe','192-834-999-7',1940,2),
(5,'Robert Louis Stevenson','A kincses sziget','192-192-191-X',1972,5),
(6,'Szigligeti Ede','Liliomfi','324-352-366-3',1977,2),
(7,'Karl May', 'Winnetou', '978-453-245-7',1899, 1);

